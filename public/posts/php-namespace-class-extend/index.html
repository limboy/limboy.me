<!DOCTYPE html>
<html>

<head>
  <meta content="width=device-width,initial-scale=1" name="viewport" />
  <meta charset="UTF-8">
  <link rel="icon" href="https://fav.farm/ğŸ‘»" />
  <title>
ç”¨php5.3çš„namespaceå®ç°ç±»çš„æ— ç—›ç»§æ‰¿
</title>
  <link rel="stylesheet" href="/assets/main.css?6&#x2F;2ShUT3RYeReiJdlrDhZN+03rWSUD7DPccwza9UdPM=" />
  <script async defer data-domain="limboy.me" src="https://analytics.limboy.me/js/plausible.js"></script>
  
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@_limboy">
<meta name="twitter:site" content="@_limboy">
<meta property="og:url" content="https://limboy.me/posts/php-namespace-class-extend/">

<meta name="twitter:title" content="ç”¨php5.3çš„namespaceå®ç°ç±»çš„æ— ç—›ç»§æ‰¿">
<meta property="og:title" content="ç”¨php5.3çš„namespaceå®ç°ç±»çš„æ— ç—›ç»§æ‰¿">

<meta property="og:description" content="">
<meta name="twitter:description" content="">



</head>

<body class="  ">
  <nav class="flex justify-center items-center opacity-80 bg-black h-12 py-0 ">
    <div class="inner flex justify-between flex-row mx-1">
      <ul class="color-white flex flex-row justify-start gap-4">
        <li><a class="nav-link opacity-90 text-2xl" href="/">Limboy</a></li>
        <!--<li><a class="nav-link" href="/coodle">Coodle</a></li>-->
      </ul>
      <ul class="color-white flex flex-row gap-4 items-center text-base">
        <!--<li> <a class="nav-link" href="/books" class="decoration-0"> Books </a> </li>-->
        <li> <a class="nav-link" href="/highlights" class="decoration-0"> Highlights </a> </li>
        <li> <a class="nav-link" href="/projects" class="decoration-0"> Projects </a> </li>
        <li> <a class="nav-link" href="/about" class="decoration-0"> About </a> </li>
      </ul>
    </div>
  </nav>

  <div class="flex flex-col">
    <div id="wrapper" class="flex justify-center" style="min-height: calc(100vh - 6.5rem);">
      <div class="inner mb-2">
        
<div class="mt-4 lg:mt-6">
  

  <h1 class="title font-medium text-3xl"><a href="https:&#x2F;&#x2F;limboy.me&#x2F;posts&#x2F;php-namespace-class-extend&#x2F;">ç”¨php5.3çš„namespaceå®ç°ç±»çš„æ— ç—›ç»§æ‰¿</a></h1>
  <div class="flex gap-4 items-center my-1">
    <time class="text-gray-500">2011-03-24</time>

  </div>
  <hr class="border-t-[3px]" />

  <div class="prose lg:prose-xl max-w-full my-6">
    <p>æ ‡é¢˜æœ‰ç‚¹æ€ªå¼‚ï¼Œå…ˆæ¥è¯´è¯´æ­£å¸¸çš„ç»§æ‰¿ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚å‡è®¾ä½ ä¸€ä¸ªåº”ç”¨çš„ Controller å¤šæ¬¡ç”¨åˆ°äº† View ç±»ï¼Œå°±åƒè¿™æ ·</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">Controller_Hello
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">action_index</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#8e908c;">//...
</span><span>		</span><span style="color:#c82728;">$view </span><span style="color:#3e999f;">= </span><span style="color:#8959a8;">new </span><span style="color:#c99e00;">View</span><span>(</span><span style="color:#839c00;">&#39;index.tpl&#39;</span><span>);
</span><span>		</span><span style="color:#c82728;">$view</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">render</span><span style="color:#4271ae;">()</span><span>;
</span><span>	}
</span><span>
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">action_edit</span><span>(</span><span style="color:#f07219;">$id</span><span>ï¼‰
</span><span>	{
</span><span>		</span><span style="color:#8e908c;">//...
</span><span>		</span><span style="color:#f07219;">$view </span><span style="color:#3e999f;">= </span><span style="color:#8959a8;">new </span><span style="color:#c99e00;">View</span><span>(</span><span style="color:#839c00;">&#39;edit.tpl&#39;</span><span>);
</span><span>		</span><span style="color:#c82728;">$view</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">render</span><span style="color:#4271ae;">()</span><span>;
</span><span>	}
</span><span>
</span><span>	</span><span style="color:#8e908c;">//...
</span><span>}
</span></code></pre>
<p>è¿™ä¸ª View æ˜¯æ¡†æ¶æä¾›çš„ï¼Œå‡å¦‚æŸä¸€å¤©å‘ç° View ç±»éœ€è¦æ–°æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯æ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ View ç±»ç»§æ‰¿æ¡†æ¶çš„ View ç±»</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">My_View </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">View
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">newMethod</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#8e908c;">//...
</span><span>	}
</span><span>}
</span></code></pre>
<p>è¿™æ—¶ä»¥å‰ä½¿ç”¨ View ç±»çš„åœ°æ–¹å°±è¦å…¨éƒ¨å˜æˆ My_Viewï¼Œè¿™æ˜¯æ¯”è¾ƒææ€–çš„ã€‚å¾ˆå¤šæ¡†æ¶ä¹Ÿéƒ½æä¾›äº†è§£å†³æ–¹æ³•ï¼Œå¤§ä½“æœ‰ä¸‰ç§</p>
<h3 id="eval">eval</h3>
<p>è¿™æ˜¯ Kohana2 é‡‡ç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯ç³»ç»Ÿç±»å‘½åä¸º XXX_Coreï¼Œç„¶åè°ƒç”¨çš„æ—¶å€™åœ¨ autoload å¤„ï¼ŒåŠ¨æ€ eval å‡ºä¸€ä¸ª XXX classï¼Œå°±åƒè¿™æ ·</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8e908c;">// system class
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">View_Core
</span><span>{
</span><span>	</span><span style="color:#8e908c;">//...
</span><span>}
</span><span>
</span><span style="color:#8e908c;">// autoload
</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">autoload</span><span>(</span><span style="color:#f07219;">$class</span><span>)
</span><span>{
</span><span>	</span><span style="color:#8e908c;">// first look into app dir
</span><span>	</span><span style="color:#8e908c;">// then look into modules dir
</span><span>	</span><span style="color:#8e908c;">// last look into system dir
</span><span>	</span><span style="color:#8959a8;">require </span><span style="color:#839c00;">&#39;/path/to/&#39;</span><span style="color:#3e999f;">.</span><span style="color:#c82728;">$class</span><span style="color:#3e999f;">.</span><span style="color:#839c00;">&#39;.php&#39;</span><span>;
</span><span>	</span><span style="color:#4271ae;">eval(</span><span style="color:#839c00;">&#39;class &#39;</span><span style="color:#3e999f;">.</span><span style="color:#c82728;">$class</span><span style="color:#3e999f;">.</span><span style="color:#839c00;">&#39; extends &#39;</span><span style="color:#3e999f;">.</span><span style="color:#c82728;">$class</span><span style="color:#3e999f;">.</span><span style="color:#839c00;">&#39;_Core&#39;</span><span style="color:#4271ae;">)</span><span>;
</span><span>}
</span></code></pre>
<p>å¦‚æœç”¨æˆ·éœ€è¦å¯¹è¯¥ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ app/classes é‡Œå®šä¹‰æ–°çš„ View ç±»ï¼ŒåŒæ—¶ç»§æ‰¿ View_Core ç±»ï¼Œè¿™æ ·ä½¿ç”¨æ—¶ï¼Œå› ä¸ºä¼˜å…ˆçº§çš„åŸå› ï¼ŒView ç±»åå¯ä»¥ä¿æŒä¸å˜</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">View </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">View_Core
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">newMethod</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#8e908c;">//...
</span><span>	}
</span><span>}
</span></code></pre>
<p>å› ä¸ºä½¿ç”¨äº† evalï¼Œæ‰€ä»¥ä¸å¤Ÿä¼˜é›…ï¼Œè€Œä¸”æœ‰å®‰å…¨éšæ‚£</p>
<h3 id="kong-ke-fa">ç©ºå£³æ³•</h3>
<p>è¿™æ˜¯ Kohana3 çš„åšæ³•ï¼Œå…·ä½“å¦‚ä¸‹</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8e908c;">// system/classes/view.php
</span><span style="color:#8e908c;">// æ˜¯çš„ï¼Œå°±è¿™ä¹ˆä¸€å¥è¯
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">View </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">Kohana_View </span><span>{}
</span><span>
</span><span style="color:#8e908c;">// system/classes/kohana/view.php
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">Kohana_View
</span><span>{
</span><span>	</span><span style="color:#8e908c;">//...
</span><span>}
</span></code></pre>
<p>æ ¹æ®ä¼˜å…ˆçº§ï¼Œæœ€åä¼šæ‰¾åˆ° system/classes/view.php å®šä¹‰çš„ View ç±»ã€‚å¦‚æœéœ€è¦è‡ªå·±æ‰©å±• Kohana_View ç±»ï¼Œå¯ä»¥åœ¨ app/classes ç›®å½•é‡Œæ–°å»ºä¸€ä¸ª view.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">View </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">Kohana_View
</span><span>{
</span><span>	</span><span style="color:#8e908c;">// add your method
</span><span>}
</span></code></pre>
<p>è¿™æ ·æ¡†æ¶å°±ä¼šå…ˆæ‰¾åˆ° app/classes/view.php è€Œä¸æ˜¯ system/classes/view.phpï¼Œè‡ªå®šä¹‰ View ç±»ç”Ÿæ•ˆï¼ŒåŒæ—¶åŸå…ˆä½¿ç”¨çš„ View ç±»ä¹Ÿä¸éœ€è¦åšè°ƒæ•´</p>
<p>è¿™ä¹ˆåšçš„ç¼ºç‚¹å°±æ˜¯ system/classes ç›®å½•ä¸‹ä¼šæœ‰å¤§é‡çš„ç©ºå£³ç±»ï¼Œæœ‰ç‚¹ç´¯èµ˜</p>
<h3 id="attach-behavior">attach behavior</h3>
<p>è¿™æ˜¯ yii é‡‡ç”¨çš„æ–¹æ³•ï¼Œç®€å•è¯´æ¥å°±æ˜¯é€šè¿‡ attachBehavior æ–¹æ³•ï¼ŒåŠ¨æ€åœ°ç»™æŸä¸ªç±»æ·»åŠ æ–°çš„åŠŸèƒ½</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">SomeComponent </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">Component
</span><span>{
</span><span>	</span><span style="color:#8e908c;">//...
</span><span>}
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">SomeBehavior </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">CBehavior
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">addWidth</span><span>(</span><span style="color:#f07219;">$width</span><span>)
</span><span>	{
</span><span>		</span><span style="color:#c82728;">$this</span><span>-&gt;</span><span style="color:#c82728;">Owner</span><span>-&gt;</span><span style="color:#c82728;">width </span><span style="color:#3e999f;">+= </span><span style="color:#c82728;">$width</span><span>;
</span><span>	}
</span><span>}
</span><span>
</span><span style="color:#c82728;">$sc </span><span style="color:#3e999f;">= </span><span style="color:#8959a8;">new </span><span style="color:#c99e00;">SomeComponent</span><span>();
</span><span style="color:#c82728;">$sc</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">attachBehavior</span><span style="color:#4271ae;">(</span><span style="color:#839c00;">&#39;sb&#39;</span><span style="color:#4271ae;">, </span><span style="color:#839c00;">&#39;SomeBehavior&#39;</span><span style="color:#4271ae;">)</span><span>;
</span><span style="color:#c82728;">$sc</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">addWidth</span><span style="color:#4271ae;">(</span><span style="color:#f07219;">100</span><span style="color:#4271ae;">)</span><span>;
</span></code></pre>
<p>éœ€è¦å®ä¾‹åŒ–ååŠ¨æ€è°ƒç”¨ attachBehavior æ–¹æ³•ï¼Œæœ‰ç‚¹éº»çƒ¦ã€‚è€Œä¸”ä¸èƒ½ä½¿ç”¨çˆ¶ç±»çš„ protected å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h3 id="yong-namespace-shi-xian-wu-tong-ji-cheng">ç”¨ namespace å®ç°æ— ç—›ç»§æ‰¿</h3>
<p>æ‰€è°“çš„æ— ç—›ç»§æ‰¿å°±æ˜¯ä¸ç”¨ä¿®æ”¹åŸå…ˆçš„ç±»åï¼Œæ²¡æœ‰å¤šä½™çš„ç©ºå£³ç±»ï¼Œæ²¡æœ‰ evalï¼Œä¸ç”¨ attachBehaviorï¼Œåªè¦ä¿®æ”¹'use'å°±è¡Œäº†ã€‚ä»£ç å¦‚ä¸‹</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8e908c;">// app/lib1.php
</span><span style="color:#8959a8;">namespace </span><span>App\Lib1;
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">Controller
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">before</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#4271ae;">echo </span><span style="color:#839c00;">&#39;lib1</span><span style="color:#f07219;">\&#39;</span><span style="color:#839c00;">s before&#39;</span><span>;
</span><span>	}
</span><span>}
</span></code></pre>
<p>å®šä¹‰äº†ä¸€ä¸ª Controller ç±»ï¼Œä½¿ç”¨æ—¶ï¼š</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">require </span><span style="color:#839c00;">&#39;lib/lib1.php&#39;</span><span>;
</span><span>
</span><span style="color:#8959a8;">use </span><span>App\Lib1\</span><span style="color:#c99e00;">Controller</span><span>;
</span><span>
</span><span style="color:#c82728;">$c </span><span style="color:#3e999f;">= </span><span style="color:#8959a8;">new </span><span style="color:#c99e00;">Controller</span><span>();
</span><span style="color:#c82728;">$c</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">before</span><span style="color:#4271ae;">()</span><span>;
</span><span>
</span><span style="color:#8e908c;">// output: lib1&#39;s before
</span></code></pre>
<p>ç°åœ¨è¦æœ‰ä¸€ä¸ªæ–°çš„ controller ç»§æ‰¿ lib1.php çš„ Controllerï¼Œå¦‚ä¸‹</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">namespace </span><span>App\Lib2;
</span><span style="color:#8959a8;">use </span><span>App\</span><span style="color:#c99e00;">Lib1</span><span>;
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">Controller </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">Lib1\Controller
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">before</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#4271ae;">echo </span><span style="color:#839c00;">&#39;lib2</span><span style="color:#f07219;">\&#39;</span><span style="color:#839c00;">s before&#39;</span><span>;
</span><span>	}
</span><span>}
</span></code></pre>
<p>ä½¿ç”¨æ—¶ï¼Œåªè¦å°† use App\Lib1\Controller æ”¹ä¸º use App\Lib2\Controller å°±è¡Œäº†</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8e908c;">// å¯ä»¥é€šè¿‡è®¾ç½®autoloadæ¥è§£å†³requireçš„é—®é¢˜
</span><span style="color:#8959a8;">require </span><span style="color:#839c00;">&#39;lib/lib1.php&#39;</span><span>;
</span><span style="color:#8959a8;">require </span><span style="color:#839c00;">&#39;lib/lib2.php&#39;</span><span>;
</span><span>
</span><span style="color:#8959a8;">use </span><span>App\Lib2\</span><span style="color:#c99e00;">Controller</span><span>;
</span><span>
</span><span style="color:#c82728;">$c </span><span style="color:#3e999f;">= </span><span style="color:#8959a8;">new </span><span style="color:#c99e00;">Controller</span><span>();
</span><span style="color:#c82728;">$c</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">before</span><span style="color:#4271ae;">()</span><span>;
</span></code></pre>
<p>æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿</p>

  </div>


  <ul class="tags flex flex-wrap justify-center items-center gap-4 mt-5 mb-8 text-lg">
    
    
    <li
      class="px-4 pb-[2px] leading-8 rounded-full border text-gray-700 border-gray-700 hover:text-gray-100 hover:border-gray-900 hover:bg-gray-900 transition-all">
      <a class="inline-block" href="https://limboy.me/tags/programming/">programming</a>
    </li>
    
    <li
      class="px-4 pb-[2px] leading-8 rounded-full border text-gray-700 border-gray-700 hover:text-gray-100 hover:border-gray-900 hover:bg-gray-900 transition-all">
      <a class="inline-block" href="https://limboy.me/tags/php/">php</a>
    </li>
    
    
  </ul>

  
  <script src="https://giscus.app/client.js" data-repo="limboy/telescope"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzODEwOTA2MTg=" data-category="General"
    data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMzMDY2MTQy" data-mapping="title" data-reactions-enabled="1"
    data-emit-metadata="0" data-theme="light" data-lang="en" crossorigin="anonymous" async>
    </script>
  

  

</div>

      </div>
    </div>
    
    <footer
      class="flex border-t border-gray-300 text-gray-600 bg-gray-50 items-center justify-center h-12 text-sm mt-2">
      <div class="flex inner justify-center gap-4">
        <a class="hover:underline" href="https://github.com/limboy" target="_blank">GitHub</a>
        <a class="hover:underline" href="https://twitter.com/_limboy" target="_blank">Twitter</a>
        <a class="hover:underline" href="https://limboy.me/index.xml">RSS</a>
      </div>
    </footer>
    
  </div>

  
  

  <script>
    // éƒ½æ˜¯ä¸ºäº† iOS...
    document.querySelector("#wrapper").style.minHeight = `calc(${window.innerHeight}px - 6.5rem)`
    window.addEventListener('resize', () => {
      document.querySelector("#wrapper").style.minHeight = `calc(${window.innerHeight}px - 6.5rem)`
    })
  </script>
</body>

</html>