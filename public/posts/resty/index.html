<!DOCTYPE html>
<html>

<head>
  <meta content="width=device-width,initial-scale=1" name="viewport" />
  <meta charset="UTF-8">
  <link rel="icon" href="https://fav.farm/ğŸ‘»" />
  <title>
å†™äº†ä¸€æ¬¾RESTæ¡†æ¶â€”â€”RESTY
</title>
  <link rel="stylesheet" href="/assets/main.css?gkCPK9ibGk2PIXzFp9c+CG7gIjpFY2pNyZ+E7aXMGlU=" />
  <script async defer data-domain="limboy.me" src="https://analytics.limboy.me/js/plausible.js"></script>
  
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@_limboy">
<meta name="twitter:site" content="@_limboy">
<meta property="og:url" content="https://limboy.me/posts/resty/">

<meta name="twitter:title" content="å†™äº†ä¸€æ¬¾RESTæ¡†æ¶â€”â€”RESTY">
<meta property="og:title" content="å†™äº†ä¸€æ¬¾RESTæ¡†æ¶â€”â€”RESTY">

<meta property="og:description" content="">
<meta name="twitter:description" content="">



</head>

<body class="  ">
  <nav class="flex justify-center items-center opacity-80 bg-black h-12 py-0 ">
    <div class="inner flex justify-between flex-row mx-1">
      <ul class="color-white flex flex-row justify-start gap-4">
        <li><a class="nav-link opacity-90 text-2xl" href="/">Limboy</a></li>
        <!--<li><a class="nav-link" href="/coodle">Coodle</a></li>-->
      </ul>
      <ul class="color-white flex flex-row gap-4 items-center text-base">
        <!--<li> <a class="nav-link" href="/books" class="decoration-0"> Books </a> </li>-->
        <li> <a class="nav-link" href="/highlights" class="decoration-0"> Highlights </a> </li>
        <li> <a class="nav-link" href="/projects" class="decoration-0"> Projects </a> </li>
        <li> <a class="nav-link" href="/about" class="decoration-0"> About </a> </li>
      </ul>
    </div>
  </nav>

  <div class="flex flex-col">
    <div id="wrapper" class="flex justify-center" style="min-height: calc(100vh - 6.5rem);">
      <div class="inner mb-2">
        
<div class="mt-4 lg:mt-6">
  

  <h1 class="title font-medium text-3xl"><a href="https:&#x2F;&#x2F;limboy.me&#x2F;posts&#x2F;resty&#x2F;">å†™äº†ä¸€æ¬¾RESTæ¡†æ¶â€”â€”RESTY</a></h1>
  <div class="flex gap-4 items-center my-1">
    <time class="text-gray-500">2010-12-04</time>

  </div>
  <hr class="border-t-[3px]" />

  <div class="prose lg:prose-xl max-w-full my-6">
    <p>å…³äº REST çš„ä»‹ç»å¯ä»¥å‚è€ƒ<a href="http://blog.leezhong.com/tech/2010/11/14/rest.html">æˆ‘ä¹‹å‰çš„æ–‡ç« </a>ï¼Œæ€»ä½“è¯´æ¥ï¼ŒREST æ˜¯ web å‘å±•çš„è¶‹åŠ¿ï¼Œè€Œ PHP æ˜¯ web å¼€å‘çš„åˆ©å™¨ï¼Œä½†æˆ‘æ‰¾äº†ä¸€éï¼Œåªæ‰¾åˆ°äº†ä¸¤ä¸ª PHP REST æ¡†æ¶(ä¸åŒ…æ‹¬é‚£äº›ä»¥ MVC ä¸ºæ ¸å¿ƒï¼ŒåŒæ—¶åˆæ”¯æŒ REST çš„æ¡†æ¶)ï¼Œä¸€ä¸ªæ˜¯<a href="http://peej.github.com/tonic/">Tonic</a>ï¼Œæ¶æ„ç†å¿µæˆ‘æ¯”è¾ƒè®¤åŒï¼Œä½†ä»£ç è´¨é‡å®åœ¨ä¸æ•¢æ­ç»´ã€‚è¿˜æœ‰ä¸€ä¸ªæ˜¯<a href="http://www.recessframework.org/">Recess</a>ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒæœ‰ç‚¹å¤æ‚åŒ–äº†ï¼ŒæŠŠä¸è¯¥ rest åšçš„äº‹ä¹Ÿåšäº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘åªèƒ½è‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿäº†ã€‚</p>
<h3 id="resty-jian-jie">RESTY ç®€ä»‹</h3>
<p>RESTY çš„æµç¨‹å¾ˆç®€å•ï¼Œè·å– Request å•ä¾‹ï¼Œç„¶åæ‰§è¡Œ exec æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é‡Œä¼šè°ƒç”¨ Route æ¥è§£æ URI è·å–ç›¸åº”çš„ Resourceï¼Œç„¶åå®ä¾‹åŒ– Resourceï¼Œè§¦å‘ç›¸åº”çš„ HTTP æ–¹æ³•ï¼Œæœ€åè¿”å›ä¸€ä¸ª Response å¯¹è±¡ï¼ŒResponse æ‰§è¡Œ output æ–¹æ³•å°±è¾“å‡ºäº†ç»“æœã€‚å¬èµ·æ¥å¥½åƒä¸€ç‚¹éƒ½ä¸ç®€å•ï¼Œå“ˆå“ˆï¼Œè¿˜æ˜¯æ¥å¤§æ¦‚çœ‹ä¸€ä¸‹ä»£ç å§</p>
<p>index.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8959a8;">try </span><span>{
</span><span>	</span><span style="color:#c99e00;">Request</span><span style="color:#4271ae;">::</span><span style="color:#c82728;">instance</span><span style="color:#4271ae;">()-&gt;</span><span style="color:#c82728;">exec</span><span style="color:#4271ae;">()-&gt;</span><span style="color:#c82728;">output</span><span style="color:#4271ae;">()</span><span>;
</span><span>} </span><span style="color:#8959a8;">catch</span><span> (</span><span style="color:#c99e00;">Route_Exception </span><span style="color:#c82728;">$e</span><span>) {
</span><span>	</span><span style="color:#c99e00;">Response</span><span style="color:#4271ae;">::</span><span style="color:#c82728;">instance</span><span style="color:#4271ae;">()
</span><span>		</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">set_status</span><span style="color:#4271ae;">(</span><span style="color:#f07219;">404</span><span style="color:#4271ae;">)
</span><span>		</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">set_body</span><span style="color:#4271ae;">(array(
</span><span style="color:#4271ae;">			</span><span style="color:#839c00;">&#39;error&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;Resource Not Found&#39;</span><span style="color:#4271ae;">,
</span><span style="color:#4271ae;">			</span><span style="color:#839c00;">&#39;Request&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#c82728;">$_SERVER</span><span style="color:#4271ae;">[</span><span style="color:#839c00;">&#39;REQUEST_URI&#39;</span><span style="color:#4271ae;">],
</span><span style="color:#4271ae;">		))
</span><span>		</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">output</span><span style="color:#4271ae;">()
</span><span>		;
</span><span>}
</span></code></pre>
<p>request.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">exec</span><span>()
</span><span>{
</span><span>	</span><span style="color:#c82728;">$class_name </span><span style="color:#3e999f;">= </span><span style="color:#839c00;">&#39;Resource_&#39;</span><span style="color:#3e999f;">.</span><span style="color:#4271ae;">str_replace(</span><span style="color:#839c00;">&#39;/&#39;</span><span style="color:#4271ae;">, </span><span style="color:#839c00;">&#39;_&#39;</span><span style="color:#4271ae;">, </span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">get_resource</span><span style="color:#4271ae;">())</span><span>;
</span><span>	</span><span style="color:#c82728;">$class </span><span style="color:#3e999f;">= </span><span style="color:#8959a8;">new </span><span style="color:#c99e00;">ReflectionClass</span><span>(</span><span style="color:#c82728;">$class_name</span><span>);
</span><span>	</span><span style="color:#c82728;">$resource </span><span style="color:#3e999f;">= </span><span style="color:#c82728;">$class</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">newInstance</span><span style="color:#4271ae;">(</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">)</span><span>;
</span><span>	</span><span style="color:#c82728;">$class</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">getMethod</span><span style="color:#4271ae;">(</span><span style="color:#839c00;">&#39;before&#39;</span><span style="color:#4271ae;">)-&gt;</span><span style="color:#c82728;">invoke</span><span style="color:#4271ae;">(</span><span style="color:#c82728;">$resource</span><span style="color:#4271ae;">)</span><span>;
</span><span>	</span><span style="color:#c82728;">$class</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">getMethod</span><span style="color:#4271ae;">(</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">request_method</span><span style="color:#4271ae;">)-&gt;</span><span style="color:#c82728;">invoke</span><span style="color:#4271ae;">(</span><span style="color:#c82728;">$resource</span><span style="color:#4271ae;">)</span><span>;
</span><span>	</span><span style="color:#c82728;">$class</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">getMethod</span><span style="color:#4271ae;">(</span><span style="color:#839c00;">&#39;after&#39;</span><span style="color:#4271ae;">)-&gt;</span><span style="color:#c82728;">invoke</span><span style="color:#4271ae;">(</span><span style="color:#c82728;">$resource</span><span style="color:#4271ae;">)</span><span>;
</span><span>
</span><span>	</span><span style="color:#c82728;">$response </span><span style="color:#3e999f;">= </span><span style="color:#c99e00;">Response</span><span style="color:#4271ae;">::</span><span style="color:#c82728;">instance</span><span style="color:#4271ae;">()</span><span>;
</span><span>	</span><span style="color:#c82728;">$response</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">set_body</span><span style="color:#4271ae;">(</span><span style="color:#c82728;">$resource</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">get_data</span><span style="color:#4271ae;">())</span><span>;
</span><span>	</span><span style="color:#8959a8;">return </span><span style="color:#c82728;">$response</span><span>;
</span><span>}
</span></code></pre>
<p>response.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">output</span><span>()
</span><span>{
</span><span>	</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">_content_encoding</span><span style="color:#4271ae;">()</span><span>;
</span><span>	</span><span style="color:#4271ae;">header(</span><span style="color:#839c00;">&#39;Content-type:application/json;charset=utf-8&#39;</span><span style="color:#4271ae;">)</span><span>;
</span><span>	</span><span style="color:#4271ae;">header(</span><span style="color:#839c00;">&#39;Status:&#39;</span><span style="color:#3e999f;">.</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">_status</span><span style="color:#3e999f;">.</span><span style="color:#839c00;">&#39; &#39;</span><span style="color:#3e999f;">.</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">_messages</span><span style="color:#4271ae;">[</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">_status</span><span style="color:#4271ae;">])</span><span>;
</span><span>	</span><span style="color:#4271ae;">header(</span><span style="color:#839c00;">&#39;Content-Length: &#39;</span><span style="color:#3e999f;">.</span><span style="color:#4271ae;">strlen(</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">_body</span><span style="color:#4271ae;">))</span><span>;
</span><span>	</span><span style="color:#8959a8;">foreach</span><span>(</span><span style="color:#c82728;">$this</span><span>-&gt;</span><span style="color:#c82728;">_header </span><span style="color:#3e999f;">as </span><span style="color:#c82728;">$key </span><span style="color:#3e999f;">=&gt; </span><span style="color:#c82728;">$val</span><span>)
</span><span>	{
</span><span>		</span><span style="color:#4271ae;">header(</span><span style="color:#c82728;">$key</span><span style="color:#3e999f;">.</span><span style="color:#839c00;">&#39;:&#39;</span><span style="color:#3e999f;">.</span><span style="color:#c82728;">$val</span><span style="color:#4271ae;">)</span><span>;
</span><span>	}
</span><span>	</span><span style="color:#4271ae;">echo </span><span style="color:#c82728;">$this</span><span>-&gt;</span><span style="color:#c82728;">_body</span><span>;
</span><span>}
</span></code></pre>
<h3 id="resty-te-xing">RESTY ç‰¹æ€§</h3>
<h3 id="qing-liang-ji">è½»é‡çº§</h3>
<p>RESTY åŒ…å«äº†æ ¸å¿ƒçš„ Request/Resource/Response/Route/Config/Validation åŠŸèƒ½ï¼Œæ²¡æœ‰å…¶ä»–å¤šä½™çš„éƒ¨ä»¶ï¼Œå¦‚ Controller/View ç­‰ç­‰ï¼Œå¾ˆçº¯ç²¹ã€‚ä¸€ä¸ªå·¥å…·åº”è¯¥æŠŠä¸€ä»¶äº‹åšå¥½ï¼ŒåŒæ—¶æä¾›æ¥å£ï¼Œè¿™ä¹Ÿæ˜¯ RESTY çš„å“²å­¦ã€‚</p>
<h3 id="shi-yong-fang-bian">ä½¿ç”¨æ–¹ä¾¿</h3>
<p>ä½¿ç”¨æ—¶ï¼Œåªéœ€å®šä¹‰å¥½ uri å¯¹åº”çš„ Resourceï¼Œç„¶åç¼–å†™ Resource å°±è¡Œäº†ï¼Œå…¶ä»–çš„äº‹ RESTY ä¼šå¸®ä½ æå®šã€‚</p>
<p>config/resource.php demo</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">return </span><span style="color:#4271ae;">array</span><span>(
</span><span>	</span><span style="color:#839c00;">&#39;/example/(?&lt;id&gt;[0-9]+)&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;example&#39;</span><span>,
</span><span>	</span><span style="color:#839c00;">&#39;/example/foo/(?&lt;name&gt;[a-zA-Z_0-9]+)&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;example/foo&#39;</span><span>,
</span><span>);
</span></code></pre>
<p>å¯ä»¥çœ‹åˆ° uri æ”¯æŒæ­£åˆ™ï¼Œæ²¡é”™ï¼ŒåŸç”Ÿçš„ php æ­£åˆ™ã€‚resource éƒ¨åˆ†å¯¹åº” resource æ–‡ä»¶çš„è·¯å¾„(ä¸åŒ…æ‹¬åç¼€)</p>
<p>resource/example.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">Resource_Example </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">Resource
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">get</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#8e908c;">/* set etag
</span><span style="color:#8e908c;">		Response::instance()
</span><span style="color:#8e908c;">			-&gt;if_none_match(md5(&#39;hello&#39;))
</span><span style="color:#8e908c;">			-&gt;add_etag(md5(&#39;hello&#39;))
</span><span style="color:#8e908c;">			;
</span><span style="color:#8e908c;">		//*/
</span><span>		</span><span style="color:#8959a8;">if </span><span>(</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">validate</span><span style="color:#4271ae;">()</span><span>)
</span><span>		{
</span><span>			</span><span style="color:#c82728;">$this</span><span>-&gt;</span><span style="color:#c82728;">_data </span><span style="color:#3e999f;">= </span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">get_data</span><span style="color:#4271ae;">()</span><span>;
</span><span>		}
</span><span>		</span><span style="color:#8959a8;">else
</span><span>		{
</span><span>			</span><span style="color:#c82728;">$this</span><span>-&gt;</span><span style="color:#c82728;">_data </span><span style="color:#3e999f;">= </span><span style="color:#4271ae;">array</span><span>(</span><span style="color:#839c00;">&#39;error&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">implode(</span><span style="color:#839c00;">&#39;,&#39;</span><span style="color:#4271ae;">, </span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">getErrors</span><span style="color:#4271ae;">())</span><span>, </span><span style="color:#839c00;">&#39;request&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#c82728;">$_SERVER</span><span>[</span><span style="color:#839c00;">&#39;REQUEST_URI&#39;</span><span>]);
</span><span>		}
</span><span>	}
</span><span>
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">post</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#c82728;">$this</span><span>-&gt;</span><span style="color:#c82728;">_data </span><span style="color:#3e999f;">= </span><span style="color:#4271ae;">array_merge(</span><span style="color:#c82728;">$this</span><span style="color:#4271ae;">-&gt;</span><span style="color:#c82728;">get_data</span><span style="color:#4271ae;">(), array(</span><span style="color:#839c00;">&#39;type&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;post&#39;</span><span style="color:#4271ae;">))</span><span>;
</span><span>	}
</span><span>}
</span></code></pre>
<p>æ¯ä¸€ä¸ªèµ„æºå¯¹åº” 4 ä¸ª http æ–¹æ³•ã€‚RESTY è¿˜å¾ˆè´´å¿ƒåœ°æä¾›äº† Validation éƒ¨ä»¶(åŸºæœ¬ä¸Šæ˜¯ç›´æ¥ä» Kohana ä¸­ K è¿‡æ¥çš„)ï¼Œæ–¹ä¾¿å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€‚</p>
<h3 id="yi-kuo-zhan">æ˜“æ‰©å±•</h3>
<p>system/classes æ–‡ä»¶å¤¹ä¸‹çš„ç±»æ–‡ä»¶ï¼Œéƒ½å¯ä»¥åœ¨ app/classes æ–‡ä»¶å¤¹ä¸‹æ‰©å±•ï¼Œè€Œä¸”ä½¿ç”¨æ—¶ä¸ç”¨åšä»»ä½•ä¿®æ”¹ã€‚å‡è®¾ä½ ä¹‹å‰å·²ç»å†™äº†ä¸å°‘ Resourceï¼Œå¿½ç„¶æƒ³åˆ°è¦æ‰©å±•ç³»ç»Ÿçš„ Resource ç±»ï¼Œæ­£å¸¸çš„åšæ³•æ˜¯å®šä¹‰ä¸€ä¸ª MY_Resource ä¹‹ç±»çš„ç±»æ–‡ä»¶æ¥æ‰©å±•ç³»ç»Ÿçš„ Resource ç±»ï¼Œç„¶åä½¿ç”¨æ—¶ä½¿ç”¨ MY_Resource è€Œä¸æ˜¯ Resourceã€‚ä½†è¿™æ ·å°±ä¼šæœ‰ä¸ªé—®é¢˜ï¼Œä¹‹å‰ä½¿ç”¨çš„ Resource ç±»éƒ½è¦åšä¿®æ”¹äº†ï¼Œå¯è°“ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚RESTY å°±æ–¹ä¾¿äº†ï¼ŒåŒæ ·è¦æ‰©å±• Resource ç±»ï¼Œåªè¦åœ¨ app/classes ä¸‹æ–°å»ºä¸€ä¸ª resource.php æ–‡ä»¶ï¼Œç„¶åæ‰©å±• Resty_Resource ç±»å³å¯ã€‚</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span>
</span><span style="color:#8959a8;">class </span><span style="color:#c99e00;">Resource </span><span style="color:#8959a8;">extends </span><span style="color:#839c00;">Resty_Resource
</span><span>{
</span><span>	</span><span style="color:#8959a8;">public function </span><span style="color:#4271ae;">foo</span><span>()
</span><span>	{
</span><span>		</span><span style="color:#8e908c;">//...
</span><span>	}
</span><span>}
</span></code></pre>
<p>è¿™æ ·ä½¿ç”¨æ—¶è¿˜æ˜¯ä¸€æ ·çš„ Resource ç±»ï¼Œä½†å´å¤šäº† foo æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯ä» Kohana å­¦åˆ°çš„æ— ç¼æ‰©å±•å¤§æ³•ï¼ˆé¢˜å¤–è¯ï¼šKohana çœŸæ˜¯ä¸ªä¸é”™çš„æ¡†æ¶ï¼Œå„ä½ä¸å¦¨ä¸€è¯•ï¼‰ã€‚åŸç†å°±æ˜¯åœ¨ç±»è‡ªåŠ¨åŠ è½½æ—¶ä¼šå…ˆå» app/classes æ–‡ä»¶å¤¹ä¸‹å»æ‰¾ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯å†å» system/classes ä¸‹æ‰¾ã€‚</p>
<h3 id="yan-zheng-gong-neng">éªŒè¯åŠŸèƒ½</h3>
<p>ä½œä¸ºä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ REST æ¡†æ¶ï¼ŒValidation è¿˜æ˜¯ä¸èƒ½å°‘çš„ï¼Œä¸ºäº†ä¸é‡å¤åˆ¶é€ è½®å­ï¼Œç›´æ¥æŠŠ Kohana çš„éªŒè¯ç±»æ¬äº†è¿‡æ¥ï¼Œç¨ä½œä¿®æ”¹ã€‚</p>
<p>é…ç½®ï¼šconfig/validation.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8959a8;">return </span><span style="color:#4271ae;">array</span><span>(
</span><span>	</span><span style="color:#839c00;">&#39;example&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>		</span><span style="color:#839c00;">&#39;get&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>			</span><span style="color:#839c00;">&#39;filters&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>				</span><span style="color:#839c00;">&#39;id&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>					</span><span style="color:#839c00;">&#39;trim&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#f07219;">null</span><span>,
</span><span>				),
</span><span>			),
</span><span>			</span><span style="color:#839c00;">&#39;rules&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>				</span><span style="color:#839c00;">&#39;id&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>					</span><span style="color:#839c00;">&#39;not_empty&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#f07219;">null</span><span>,
</span><span>					</span><span style="color:#839c00;">&#39;min_length&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(</span><span style="color:#f07219;">2</span><span>),
</span><span>					</span><span style="color:#839c00;">&#39;digit&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#f07219;">null</span><span>,
</span><span>				),
</span><span>			),
</span><span>		),
</span><span>	),
</span><span>);
</span></code></pre>
<p>é”™è¯¯æç¤ºï¼šconfig/message.php</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span style="color:#f07219;">&lt;?php
</span><span style="color:#8959a8;">return </span><span style="color:#4271ae;">array</span><span>(
</span><span>	</span><span style="color:#839c00;">&#39;example&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>		</span><span style="color:#839c00;">&#39;id&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#4271ae;">array</span><span>(
</span><span>			</span><span style="color:#839c00;">&#39;digit&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;idå¿…é¡»æ˜¯æ•°å­—&#39;</span><span>,
</span><span>			</span><span style="color:#839c00;">&#39;not_empty&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;idä¸èƒ½ä¸ºç©º&#39;</span><span>,
</span><span>			</span><span style="color:#839c00;">&#39;min_length&#39; </span><span style="color:#3e999f;">=&gt; </span><span style="color:#839c00;">&#39;idé•¿åº¦è‡³å°‘ä¸º:value&#39;</span><span>,
</span><span>		),
</span><span>	),
</span><span>);
</span></code></pre>
<h3 id="config-gong-neng">Config åŠŸèƒ½</h3>
<p>config æ–‡ä»¶å¦‚ä¸Šé¢æ‰€ç¤ºï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚ä½¿ç”¨ä¹Ÿå¾ˆç®€å•:</p>
<pre data-lang="php" style="background-color:#f9f9f9;color:#111111;" class="language-php "><code class="language-php" data-lang="php"><span>// è·å–config/message.phpæ–‡ä»¶çš„example keyå¯¹åº”çš„å†…å®¹
</span><span>Config::get(&#39;message.example&#39;);
</span><span>
</span><span>// è®¾ç½®config(ä¸ä¼šå†™å…¥åˆ°æ–‡ä»¶ï¼Œåªåœ¨ä¸€ä¸ªhttp requestæœ‰æ•ˆ)
</span><span>Config::set(&#39;message.example.id.digit&#39;, &#39;id can be anything&#39;);
</span></code></pre>
<h3 id="xia-zai">ä¸‹è½½</h3>
<p><a href="https://github.com/limboy/resty">https://github.com/limboy/resty</a></p>
<p>æ¬¢è¿ä½¿ç”¨ï¼Œå¹¶åé¦ˆ:)</p>

  </div>


  <ul class="tags flex flex-wrap justify-center items-center gap-4 mt-5 mb-8 text-lg">
    
    
    <li
      class="px-4 pb-[2px] leading-8 rounded-full border text-gray-700 border-gray-700 hover:text-gray-100 hover:border-gray-900 hover:bg-gray-900 transition-all">
      <a class="inline-block" href="https://limboy.me/tags/programming/">programming</a>
    </li>
    
    <li
      class="px-4 pb-[2px] leading-8 rounded-full border text-gray-700 border-gray-700 hover:text-gray-100 hover:border-gray-900 hover:bg-gray-900 transition-all">
      <a class="inline-block" href="https://limboy.me/tags/project/">project</a>
    </li>
    
    <li
      class="px-4 pb-[2px] leading-8 rounded-full border text-gray-700 border-gray-700 hover:text-gray-100 hover:border-gray-900 hover:bg-gray-900 transition-all">
      <a class="inline-block" href="https://limboy.me/tags/php/">php</a>
    </li>
    
    
  </ul>

  
  <script src="https://giscus.app/client.js" data-repo="limboy/telescope"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzODEwOTA2MTg=" data-category="General"
    data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMzMDY2MTQy" data-mapping="title" data-reactions-enabled="1"
    data-emit-metadata="0" data-theme="light" data-lang="en" crossorigin="anonymous" async>
    </script>
  

  

</div>

      </div>
    </div>
    
    <footer
      class="flex border-t border-gray-300 text-gray-600 bg-gray-50 items-center justify-center h-12 text-sm mt-2">
      <div class="flex inner justify-center gap-4">
        <a class="hover:underline" href="https://github.com/limboy" target="_blank">GitHub</a>
        <a class="hover:underline" href="https://twitter.com/_limboy" target="_blank">Twitter</a>
        <a class="hover:underline" href="https://limboy.me/index.xml">RSS</a>
      </div>
    </footer>
    
  </div>

  
  

  <script>
    // éƒ½æ˜¯ä¸ºäº† iOS...
    document.querySelector("#wrapper").style.minHeight = `calc(${window.innerHeight}px - 6.5rem)`
    window.addEventListener('resize', () => {
      document.querySelector("#wrapper").style.minHeight = `calc(${window.innerHeight}px - 6.5rem)`
    })
  </script>
</body>

</html>